# 课后总结
## 计算机的硬件构造

一台计算机，不论有多么先进，都是由是四大类硬件组成的。

1. 数据存储设备

   如，ROM、RAM
   
   - ROM（read-only memory，只读），用来加载程序指令
   - RAM（random-access memory，可乱序存取），用来存取程序执行中所产生的数据

   本课程里的ROM和RAM是同一种硬件，即硬件结构、原理一样。

   <details>
   <summary>数据存储设备还有其他类型</summary>
    
   - DADS（direct-access data storage media，有序存储）
   
     如，CD，DVD，HDD，磁带。

     此类设备的存储地址有远近区别。而RAM的读取可以认为是等距的，读取任何位置所需要的时间和复杂度相同。
   </details>
   
2. 芯片

   由一个ALU、几个Register和一个Program Counter构成一个核心单元。
   本课程的芯片是一个包含了一个核心单元的CPU，而更先进的芯片可能包含了多个核心单元。
  
   - ALU（arithmetic and logic unit），数学和逻辑运算单元，由若干种逻辑门搭建。

   - Register，寄存器，一般由8/16/32/64个bit构成。一个bit能存一位数，0或者1。

     这里的“8/16/32/64”描述的是CPU“线宽”，对应“8位、16位、32位、64位”机。
     
   - Program Counter，指令地址寄存器/程序计数器，由寄存器，步进器，和两个控制信号组成。
    
3. 输入设备
  
   向RAM指定地址推送数据
  
4. 输出设备

   从RAM指定地址取用数据

输入和输出设备使用RAM哪段地址，推送的是什么样的数据，这些数据应该被怎样解读，多久刷新一次数据……
这些有关电脑与其他设备之间的分工配合问题，都是靠硬件协议和驱动程序来规范的。
  
## 内存（RAM）的结构

### RAM的基础元素，寄存器
 
   RAM的基础单元是Register，寄存器。和CPU里的寄存器结构一样，线宽一般也是一样的。同时也是每次进行数据读取的最小单位。
   
   一个寄存器由n个bit组成，一个bit由一个Mux加一个DFF（data flip-flop）组成，存储1位数据：0或1。
   
   <这里画bit的数字逻辑图>

### RAM的结构，实现任意位置等效读取
   
   由不超过2<sup>n</sup>个寄存器组成的RAM，可以仅用一个同样结构的寄存器来完成选址工作。
   找到并存取RAM中任何一个位置的数据，难度和用时都是一样的。
   
   <这里画16位register选址结构图>
   
## 芯片（CPU）的结构和工作原理

   本课程的芯片是一个CPU（central processing unit）。
   由1个ALU，2个Register和1个Program Counter构成。

 - ALU 数学和逻辑运算单元 arithmetic and logic unit

   本课程的ALU包含几种元件：
   - 16位全加器 Full Adder（两个半加器Half Adder构成）
   - 16位Mux、16位Not、16位And等

   ALU的结构和所实现的计算：
   - 输入2个16位数据，6个1位的控制信号

     x(16), y(16);<br>
     zero x, not x, zero y, not y, x+y/x&y, not out; <br>
     这6个控制信号对应的计算步骤是顺序发生的，<br>
     也就是说，先处理x，再处理y，然后对x和y进行计算，再对结果进行一次处理。
     
   - 输出1个16位数据，2个1位的控制信号

     out(16)<br>
     zero, negative<br>
     ALU的计算结果将会被输出到D寄存器，A寄存器，M（RAM[A]）里，
     可以输出到这三个中的任意一个或多个位置，也可以不输出。
     
   - 靠6个控制信号可以对输入数据进行的计算是

     直接得到：0, 1, -1, x, y, !x, !y, -x, -y, <br>
     计算：x+1, x-1, y+1, y-1, x+y, x-y, y-x, x&y, x|y

     <这里画ALU的数字逻辑电路图>
          
 - Register，寄存器
   
   - D Register

     存储数据。由C类指令指挥ALU计算并输出结果到这个寄存器里。
     
   - A Register

     接收指令，程序指令如果是A类指令，会直接读到这个寄存器里。<br>
     作为RAM选址器，当需要读取M（RAM[A]）时。
     
- Program Counter，指令地址寄存器/程序计数器。
  
  PC的主要构成：
   - 16位增量器/步进器 Incrementer
   - 1位的reset控制信号，1位的load控制信号

  PC可以被手动归零（由reset控制），没有指令时每读一行程序（一个时钟周期）会自+1，也可以由C类指令控制将A寄存器的数据输入到PC里。
     
 - CPU，中央处理器
   
   D寄存器 作为ALU的一个输入（x），A寄存器/RAM[A] 作为ALU的另一个输入（y）；
   程序里的C类指令会被用做控制信号（c）
   - 第15位决定指令是A类还是C类；
   - 第6-11位决定ALU进行什么计算；
   - 第3-5位决定ALU结果输出到什么地方；
   - 第0-2位决定是否输出A到PC
   - 第12-14位没用，C类指令时一般写1；
   
   <这里画CPU的数字逻辑电路图>
    
## 如何“指挥”芯片干活
## 
## 操作系统、软件和编程
