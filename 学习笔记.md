# 随堂笔记  

  重点知识摘抄，
  默写（绘制）软硬件逻辑结构，
  重要的公式和表格。
  
## 1 搭建逻辑门
- 整个计算机可以只有Nand门一种逻辑元件。

  所有逻辑公式都可以用Not,And和Or来表达，<br/>
  而Not、And和Or都可以只用Nand来表达，<br/>
  所以每种逻辑公式都可以简化成只包含Nand的表达式，<br/>
  因此每种逻辑门都可以只用Nand来搭建。<br/>
  - Not(_x_) = _x_ Nand _x_
  - _x_ And _y_ = Not(_x_ Nand _y_)<br/>
    =(_x_ Nand _y_) Nand (_x_ Nand _y_)
  - _x_ Or _y_ = Not(Not(_x_) And Not(_y_))<br/>
  = (_x_ Nand _x_) Nand (_y_ Nand _y_)
  - _x_ Xor _y_ = ( _x_ And Not(_y_) Or Not(_x_) And _y_ ) <br/>
   =(_x_ Nand (_y_ Nand _y_)) Nand ((_x_ Nand _x_) Nand _y_)
  - Mux(_a_,_b_,_sel_) = (Not(_sel_) And _a_) Or (_sel_ And _b_)
  - DMux(_in_,_sel_): _a_ = _in_ And Not(_sel_) ; _b_ = _in_ And _sel_
### 数字逻辑电路图
  - Not | And | Or | Xor （只用Nand）
    
    <img src=/SVG/Not-And-Or-Xor.svg>
    
  - Mux | DMux  （只用Nand）
    
    <img src=/SVG/Mux-DMux.svg>
  - Mux4Way16 （两种组法）

    <img src=/SVG/Mux4Way16.svg>
### 真值表
  - Not
    
    |in |`Not`
    |:-:|:---:
    | 0 | `1`
    | 1 | `0`

  - Nand | And | Or | Xor 
    
    | a | b |`Nand`|`And`|`Or`|`Xor`
    |:-:|:-:|:----:|:---:|:--:|:---:
    | 0 | 0 |  `1` | `0` | `0`| `0`
    | 0 | 1 |  `1` | `0` | `1`| `1`
    | 1 | 0 |  `1` | `0` | `1`| `1`
    | 1 | 1 |  `0` | `1` | `1`| `0` 

  - Mux | DMux

    |sel| a | b |Mux|`out`|sel|in |DMux|`a`|`b`
    |:-:|:-:|:-:|:-:|:---:|:-:|:-:|:--:|:-:|:-:
    | 0 | 0 | 0 | a | `0` | 0 | 0 |in,0|`0`|`0`
    | 0 | 0 | 1 | a | `0`
    | 0 | 1 | 0 | a | `1` | 0 | 1 |in,0|`1`|`0`
    | 0 | 1 | 1 | a | `1`
    | 1 | 0 | 0 | b | `0`
    | 1 | 0 | 1 | b | `1` | 1 | 0 |0,in|`0`|`0`
    | 1 | 1 | 0 | b | `0`
    | 1 | 1 | 1 | b | `1` | 1 | 1 |0,in|`0`|`1` 

## 2 二进制和ALU运算单元

计算机由若干Nand门组成，逻辑门只能输入输出，如“真 _vs_ 假”或“1 _vs_ 0”，这样的互为对立的数据。因此计算机的芯片只能做二进制数学运算和逻辑运算。

  - 十进制转二进制

    任意十进制正整数可以写成一个只由2<sup>n</sup>组成的加法序列<br/>
    如：99=64+32+2+1

    |n...            | 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 
    |:--------------:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:
    |2<sup>n</sup>...|128|64 |32 |16 | 8 | 4 | 2 | 1
    |99=             |   |64+|32+|   |   |   |2+ | 1
    |binary(99)=     | 0 | 1 | 1 | 0 | 0 | 0 | 1 | 1

    十进制的正整数 **X** 转二进制的计算步骤：
  
    找出 **X** 里包含的最大的**2的n次方**，在二进制**n**位上写1，<br/>
    **X** 减去这个2的n次方，如果有余数：<br/>
    找出**余数**里包含的最大的**2的m次方**，在二进制**m**位上写1，<br/>
    **余数** 减去这个2的m次方，如果还有余数：<br/>
    继续上述过程直到余数减为0。
  
    ```python
    
    nSqrofTwo=[128,64,32,16,8,4,2,1]
    binary=[0,0,0,0,0,0,0,0]
    
    X=int()  #括号里需要填一个数字
    binX=binary
    for i in nSqrofTwo:
      if not X<i:
        rem = X-i
        binX[nSqrofTwo.index(i)]=1
    
    print(*binX,sep='')

    ```

    二进制是从右往左书写的n←←←0。它的第一位是0（不是1）<br/>
    aka, 0位在最右边，n位在最左边
    
  - 二进制下负数的表达
  
    在纯数学概念里的二进制数字，就像阿拉伯数字一样，表达的是正整数。若要表达负数（也包括小数分，分数等其他类型的数字），需要借助符号。但是计算机能读取的数据只有0和1，计算机不认识符号，也不能直接写入符号。
  
    **因此负数在计算机里的实现，纯靠人为规定。**
  
    计算机内存RAM是由8个（或16/32/64个）字节构成一个最基础的单元，我们规定最左边的（n最大）的一位用来表示正负号。0表示正数，1表示负数。剩下的7位（15/31/63位）用来表达绝对值。
  
    **但是，事情没这么简单**
  
    如果负数**Y**的二进制直接写成1+|Y|的二进制，会导致两个问题：
    - 0会有+0和-0两个二进制数值：0 0-0000和1 0-0000；
    - 直接做二进制加减法的时候，会得到错误的计算结果。例如：
      |dec|  | binary |
      |:-:|-:|-------:|
      | -8|  |10001000|
      | 12| +|00001100|
      |-20| =|10010100|
  
    **解决方案是**，用**补码法**表达二进制负数。
  
    **负数Y**的二进制：
    
        计算Y的二进制表达：
          y=abs(Y)
          bin=(y)
        取反，Not/每一位进行0，1互换(0换1，1换0)/1111-1111-bin=(y)
          Not(bin(y))
        加1，
          Not(bin(y))+1
    
  - 二进制转十进制
## 3 搭建内存
## 4 机器语言、汇编语言
## 5 搭建计算机
## 6 写一个汇编器
### PartII
## 7 Virtual Machine 中间语言与虚拟机
## 8 完成中间语言的翻译器
## 9 Jack Language介绍
## 10 tokenizer 词法分析器
## 11 Compiler 写一个编译器
## 12 OS 用Jack写操作系统
# 总结
## 计算机的硬件构造

一台计算机，不论有多么先进，都是由是四大类硬件组成的。

- 数据存储设备，如ROM和RAM
  
  ROM和RAM是同一种硬件，硬件结构的原理一样，只不过用途不同。就是一串一字排列的寄存器DFF。
  - ROM，存储程序指令
  - RAM，存储程序执行所产生的数据

- 芯片

  由一个由逻辑门搭建的核心计算单元ALU，和几个寄存器DFF构成。
  
- 输入设备
  
  向RAM指定地址推送数据
  
- 输出设备

  从RAM指定地址取用数据

输入和输出设备与计算机之间的分工配合，靠硬件协议和驱动程序来规范
  
## ROM和RAM的结构

## 芯片的结构和工作原理
## 如何“指挥”芯片干活
## 
## 操作系统、软件和编程
